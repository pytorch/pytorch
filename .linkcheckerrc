# Configuration for linkchecker (https://github.com/linkchecker/linkchecker)
# Reference: https://linkchecker.github.io/linkchecker/man/linkcheckerrc.html
#
# Checks internal links and anchors in the built HTML documentation.
# Run after building docs:
#   cd docs && make html && cd ..
#   linkchecker --config=.linkcheckerrc docs/build/html/index.html
#
# Or use:  make -C docs linkcheck-local

[output]

[text]
colorwarning=blue

# Enable anchor checking — verifies that #fragment targets resolve to
# an actual id in the target page.
# Note: anchor checking fails on GitHub .md pages because they use JS
# to create anchor ids, but it works well on normal HTML tags.
[AnchorCheck]

[filtering]
ignorewarnings=http-redirected,http-moved-permanent

# Only check internal links by default. External URLs are already
# handled by scripts/lint_urls.sh in the _link_check.yml workflow.
#
# Also don't recurse into /generated/ API stubs — links TO those pages
# (and their anchors) are still checked, but we skip crawling the
# ~2500 stubs for outgoing links since those are auto-generated by
# Sphinx and reliable.  This cuts runtime from 20+ min to a few min.
nofollow=
    https?://.*
    /generated/

# Skip source views, static assets, and all GitHub links.
# GitHub uses JS to generate anchor IDs (line numbers, headings in
# .md files, etc.) so linkchecker will always report false "anchor
# not found" errors on them since it doesn't execute JS.
ignore=
    _modules/
    _sources/
    _static/
    genindex\.html
    search\.html
    https://github\.com/

[checking]
threads=50
timeout=30
