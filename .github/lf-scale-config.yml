
# This file is generated by .github/scripts/validate_scale_config.py in test-infra
# It defines runner types that will be provisioned by by LF Self-hosted runners

# scale-config.yml:
#   Powers what instance types are available for GHA auto-scaled
#   runners. Runners listed here will be available as self hosted
#   runners, configuration is directly pulled from the main branch.
#
# NOTE (Apr, 5, 2021): Linux runners are currently all an amazonlinux2
#
# NOTE (Jan 5, 2021): Linux runners are all non-ephemeral to reduce the amount of CreateInstaces calls
#                     to avoid RequestLimitExceeded issues
#
# TODO: Add some documentation on how the auto-scaling works
#
# NOTE: Default values,
#
# runner_types:
#   runner_label:
#     instance_type: m4.large
#     os: linux
#     max_available: 20
#     disk_size: 50
#     is_ephemeral: true

runner_types:
  lf.linux.12xlarge:
    disk_size: 200
    instance_type: c5.12xlarge
    is_ephemeral: false
    max_available: 1000
    os: linux
  lf.linux.10xlarge.avx2:
    disk_size: 200
    instance_type: m4.10xlarge
    is_ephemeral: false
    max_available: 60
    os: linux
  lf.linux.24xl.spr-metal:
    disk_size: 200
    instance_type: c7i.metal-24xl
    is_ephemeral: false
    max_available: 150
    os: linux
  lf.linux.16xlarge.spr:
    disk_size: 200
    instance_type: c7i.16xlarge
    is_ephemeral: false
    max_available: 150
    os: linux
  lf.linux.9xlarge.ephemeral:
    disk_size: 200
    instance_type: c5.9xlarge
    is_ephemeral: true
    max_available: 20
    os: linux
  lf.linux.12xlarge.ephemeral:
    disk_size: 200
    instance_type: c5.12xlarge
    is_ephemeral: true
    max_available: 300
    os: linux
  lf.linux.16xlarge.nvidia.gpu:
    disk_size: 150
    instance_type: g3.16xlarge
    is_ephemeral: false
    max_available: 150
    os: linux
  lf.linux.24xlarge:
    disk_size: 150
    instance_type: c5.24xlarge
    is_ephemeral: false
    max_available: 250
    os: linux
  lf.linux.2xlarge:
    disk_size: 150
    instance_type: c5.2xlarge
    is_ephemeral: false
    max_available: 3120
    os: linux
  lf.linux.4xlarge:
    disk_size: 150
    instance_type: c5.4xlarge
    is_ephemeral: false
    max_available: 1000
    os: linux
  lf.linux.4xlarge.nvidia.gpu:
    disk_size: 150
    instance_type: g3.4xlarge
    is_ephemeral: false
    max_available: 1000
    os: linux
  lf.linux.8xlarge.nvidia.gpu:
    disk_size: 150
    instance_type: g3.8xlarge
    is_ephemeral: false
    max_available: 400
    os: linux
  lf.linux.g4dn.12xlarge.nvidia.gpu:
    disk_size: 150
    instance_type: g4dn.12xlarge
    is_ephemeral: false
    max_available: 250
    os: linux
  lf.linux.g4dn.metal.nvidia.gpu:
    disk_size: 150
    instance_type: g4dn.metal
    is_ephemeral: false
    max_available: 300
    os: linux
  lf.linux.g5.48xlarge.nvidia.gpu:
    disk_size: 150
    instance_type: g5.48xlarge
    is_ephemeral: false
    max_available: 200
    os: linux
  lf.linux.g5.12xlarge.nvidia.gpu:
    disk_size: 150
    instance_type: g5.12xlarge
    is_ephemeral: false
    max_available: 150
    os: linux
  lf.linux.g5.4xlarge.nvidia.gpu:
    disk_size: 150
    instance_type: g5.4xlarge
    is_ephemeral: false
    max_available: 2400
    os: linux
  lf.linux.g6.4xlarge.experimental.nvidia.gpu:
    disk_size: 150
    instance_type: g6.4xlarge
    is_ephemeral: false
    max_available: 30
    os: linux
  lf.linux.large:
    max_available: 1200
    disk_size: 15
    instance_type: c5.large
    is_ephemeral: false
    os: linux
  lf.linux.arm64.2xlarge:
    disk_size: 256
    instance_type: t4g.2xlarge
    is_ephemeral: false
    max_available: 200
    os: linux
  lf.linux.arm64.m7g.4xlarge:
    disk_size: 256
    instance_type: m7g.4xlarge
    is_ephemeral: false
    max_available: 200
    os: linux
  lf.linux.arm64.m7g.metal:
    disk_size: 256
    instance_type: m7g.metal
    is_ephemeral: false
    max_available: 100
    os: linux
  lf.windows.4xlarge:
    disk_size: 256
    instance_type: c5d.4xlarge
    is_ephemeral: true
    max_available: 420
    os: windows
  lf.windows.4xlarge.nonephemeral:
    disk_size: 256
    instance_type: c5d.4xlarge
    is_ephemeral: false
    max_available: 420
    os: windows
  lf.windows.8xlarge.nvidia.gpu:
    disk_size: 256
    instance_type: p3.2xlarge
    is_ephemeral: true
    max_available: 300
    os: windows
  lf.windows.8xlarge.nvidia.gpu.nonephemeral:
    disk_size: 256
    instance_type: p3.2xlarge
    is_ephemeral: false
    max_available: 150
    os: windows
  lf.windows.g5.4xlarge.nvidia.gpu:
    disk_size: 256
    instance_type: g5.4xlarge
    is_ephemeral: false
    max_available: 250
    os: windows

  ### Setup runner types to test the Amazon Linux 2023 AMI
  lf.amz2023.linux.12xlarge:
    disk_size: 200
    instance_type: c5.12xlarge
    is_ephemeral: false
    max_available: 1000
    os: linux
    ami: al2023-ami-2023.5.20240701.0-kernel-6.1-x86_64
  lf.amz2023.linux.10xlarge.avx2:
    disk_size: 200
    instance_type: m4.10xlarge
    is_ephemeral: false
    max_available: 60
    os: linux
    ami: al2023-ami-2023.5.20240701.0-kernel-6.1-x86_64
  lf.amz2023.linux.24xl.spr-metal:
    disk_size: 200
    instance_type: c7i.metal-24xl
    is_ephemeral: false
    max_available: 150
    os: linux
    ami: al2023-ami-2023.5.20240701.0-kernel-6.1-x86_64
  lf.amz2023.linux.16xlarge.spr:
    disk_size: 200
    instance_type: c7i.16xlarge
    is_ephemeral: false
    max_available: 150
    os: linux
    ami: al2023-ami-2023.5.20240701.0-kernel-6.1-x86_64
  lf.amz2023.linux.9xlarge.ephemeral:
    disk_size: 200
    instance_type: c5.9xlarge
    is_ephemeral: true
    max_available: 20
    os: linux
    ami: al2023-ami-2023.5.20240701.0-kernel-6.1-x86_64
  lf.amz2023.linux.12xlarge.ephemeral:
    disk_size: 200
    instance_type: c5.12xlarge
    is_ephemeral: true
    max_available: 300
    os: linux
    ami: al2023-ami-2023.5.20240701.0-kernel-6.1-x86_64
  lf.amz2023.linux.16xlarge.nvidia.gpu:
    disk_size: 150
    instance_type: g3.16xlarge
    is_ephemeral: false
    max_available: 150
    os: linux
    ami: al2023-ami-2023.5.20240701.0-kernel-6.1-x86_64
  lf.amz2023.linux.24xlarge:
    disk_size: 150
    instance_type: c5.24xlarge
    is_ephemeral: false
    max_available: 250
    os: linux
    ami: al2023-ami-2023.5.20240701.0-kernel-6.1-x86_64
  lf.amz2023.linux.2xlarge:
    disk_size: 150
    instance_type: c5.2xlarge
    is_ephemeral: false
    max_available: 3120
    os: linux
    ami: al2023-ami-2023.5.20240701.0-kernel-6.1-x86_64
  lf.amz2023.linux.4xlarge:
    disk_size: 150
    instance_type: c5.4xlarge
    is_ephemeral: false
    max_available: 1000
    os: linux
    ami: al2023-ami-2023.5.20240701.0-kernel-6.1-x86_64
  lf.amz2023.linux.4xlarge.nvidia.gpu:
    disk_size: 150
    instance_type: g3.4xlarge
    is_ephemeral: false
    max_available: 1000
    os: linux
    ami: al2023-ami-2023.5.20240701.0-kernel-6.1-x86_64
  lf.amz2023.linux.8xlarge.nvidia.gpu:
    disk_size: 150
    instance_type: g3.8xlarge
    is_ephemeral: false
    max_available: 400
    os: linux
    ami: al2023-ami-2023.5.20240701.0-kernel-6.1-x86_64
  lf.amz2023.linux.g4dn.12xlarge.nvidia.gpu:
    disk_size: 150
    instance_type: g4dn.12xlarge
    is_ephemeral: false
    max_available: 250
    os: linux
    ami: al2023-ami-2023.5.20240701.0-kernel-6.1-x86_64
  lf.amz2023.linux.g4dn.metal.nvidia.gpu:
    disk_size: 150
    instance_type: g4dn.metal
    is_ephemeral: false
    max_available: 300
    os: linux
    ami: al2023-ami-2023.5.20240701.0-kernel-6.1-x86_64
  lf.amz2023.linux.g5.48xlarge.nvidia.gpu:
    disk_size: 150
    instance_type: g5.48xlarge
    is_ephemeral: false
    max_available: 200
    os: linux
    ami: al2023-ami-2023.5.20240701.0-kernel-6.1-x86_64
  lf.amz2023.linux.g5.12xlarge.nvidia.gpu:
    disk_size: 150
    instance_type: g5.12xlarge
    is_ephemeral: false
    max_available: 150
    os: linux
    ami: al2023-ami-2023.5.20240701.0-kernel-6.1-x86_64
  lf.amz2023.linux.g5.4xlarge.nvidia.gpu:
    disk_size: 150
    instance_type: g5.4xlarge
    is_ephemeral: false
    max_available: 2400
    os: linux
    ami: al2023-ami-2023.5.20240701.0-kernel-6.1-x86_64
  lf.amz2023.linux.g6.4xlarge.experimental.nvidia.gpu:
    disk_size: 150
    instance_type: g6.4xlarge
    is_ephemeral: false
    max_available: 30
    os: linux
    ami: al2023-ami-2023.5.20240701.0-kernel-6.1-x86_64
  lf.amz2023.linux.large:
    max_available: 1200
    disk_size: 15
    instance_type: c5.large
    is_ephemeral: false
    os: linux
    ami: al2023-ami-2023.5.20240701.0-kernel-6.1-x86_64
  lf.amz2023.linux.arm64.2xlarge:
    disk_size: 256
    instance_type: t4g.2xlarge
    is_ephemeral: false
    max_available: 200
    os: linux
    ami: al2023-ami-2023.5.20240701.0-kernel-6.1-arm64
  lf.amz2023.linux.arm64.m7g.4xlarge:
    disk_size: 256
    instance_type: m7g.4xlarge
    is_ephemeral: false
    max_available: 200
    os: linux
    ami: al2023-ami-2023.5.20240701.0-kernel-6.1-arm64
  lf.amz2023.linux.arm64.m7g.metal:
    disk_size: 256
    instance_type: m7g.metal
    is_ephemeral: false
    max_available: 100
    os: linux
    ami: al2023-ami-2023.5.20240701.0-kernel-6.1-arm64
